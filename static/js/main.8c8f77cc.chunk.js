(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(9),i=a.n(r),l=(a(61),a(4)),c=a(5),s=a(7),u=a(6),m=a(8),p=(a(62),a(18)),d=a(17),h=(a(63),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleStartStop=function(){a.setState({count:!1})},a.state={count:!0},setTimeout(a.handleStartStop,2e3),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.state.count?o.a.createElement("div",{className:""},o.a.createElement("div",null,o.a.createElement("h1",{style:{backgroundColor:"#E19B5F",width:"100%",height:"100px",textAlign:"center",fontSize:"70px",fontFamily:"Palatino Linotype",color:"red"},id:"timer-label"},"FOODMAP"),o.a.createElement("p",{id:"time-left"},o.a.createElement("img",{src:"/GDL-open-house/loading.gif"})))):o.a.createElement(d.a,{to:"/location"})}}]),t}(o.a.Component)),f=a(53),g=a(20),v=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).onMarkerClick=function(t,a,n){e.setState({selectedPlace:t.place,activeMarker:a,showInfoWindow:!0})},e.getMarkers=function(){return e.props.filteredPlaces.map(function(t){return o.a.createElement(g.Marker,{key:t.id,onClick:e.onMarkerClick,position:t.geometry.location,title:t.name,place:t})})},e.fetchPlaces=function(t,a){var n=t.google,o=new n.maps.places.PlacesService(a),r={location:e.props.mainLocation,radius:1e3,type:["restaurant"]};o.nearbySearch(r,function(t,a,o){a===n.maps.places.PlacesServiceStatus.OK&&(e.props.setLoadedPlaces(t),e.props.setFilteredPlaces())})},e.state={selectedPlace:{},activeMarker:null,showInfoWindow:!0},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{style:{width:"100%",height:"50vh"}},o.a.createElement(g.Map,{style:{width:"100%",height:"50vh"},google:this.props.google,zoom:16,onReady:this.fetchPlaces,initialCenter:this.props.mainLocation},this.getMarkers(),o.a.createElement(g.InfoWindow,{visible:this.state.showInfoWindow,marker:this.state.activeMarker},o.a.createElement("div",null,o.a.createElement("h6",null,this.state.selectedPlace?this.state.selectedPlace.name:""),this.state.selectedPlace&&this.state.selectedPlace.photos&&this.state.selectedPlace.photos.length>0?o.a.createElement("img",{src:this.state.selectedPlace.photos[0].getUrl(),style:{height:"100px"}}):"")))))}}]),t}(o.a.Component),E=Object(g.GoogleApiWrapper)({apiKey:"AIzaSyC0VLXysIX4t0QzQlWFO0VIUyFfRZLV8nA"})(v),b=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).call(this))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"container",style:{marginTop:"10px",backgroundColor:"#E19B5F",textAlign:"center",fontSize:"20px",fontFamily:"Palatino Linotype",color:"red"}},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-3"},o.a.createElement("label",{htmlFor:"priceFilter"},"Precio:")," ",o.a.createElement("select",{className:"custom-select",name:"priceFilter",value:this.props.filters.priceFilter,onChange:this.props.setFilter},o.a.createElement("option",{value:-1},"Mostrar todo"),o.a.createElement("option",{value:0},"Gratis"),o.a.createElement("option",{value:1},"Barato"),o.a.createElement("option",{value:2},"Moderado"),o.a.createElement("option",{value:3},"Costoso"),o.a.createElement("option",{value:4},"Muy Costoso"))),o.a.createElement("div",{className:"col-3"},o.a.createElement("label",{htmlFor:"ratingFilter"},"Calificacion:")," ",o.a.createElement("select",{className:"custom-select",name:"ratingFilter",value:this.props.filters.ratingFilter,onChange:this.props.setFilter},o.a.createElement("option",{value:-1},"Mostrar todo"),o.a.createElement("option",{value:1},"1 o m\xe1s"),o.a.createElement("option",{value:2},"2 o m\xe1s"),o.a.createElement("option",{value:3},"3 o m\xe1s"),o.a.createElement("option",{value:4},"4 o m\xe1s"),o.a.createElement("option",{value:5},"5")))))}}]),t}(o.a.Component),y=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).setLoadedPlaces=function(t){e.setState({loadedPlaces:t})},e.setFilter=function(t){var a=t.target,n=a.value,o=a.name,r=Object(f.a)({},o,Number(n));"priceFilter"===o?r.ratingFilter=e.state.filters.ratingFilter:r.priceFilter=e.state.filters.priceFilter,e.setState({filters:r},e.setFilteredPlaces)},e.setFilteredPlaces=function(){var t=e.state.loadedPlaces.filter(function(t){var a=!(e.state.filters.priceFilter>-1)||t.price_level<=e.state.filters.priceFilter,n=!(e.state.filters.ratingFilter>-1)||t.rating>=e.state.filters.ratingFilter;return a&&n});e.setState({filteredPlaces:t})},e.getGroupedPlaces=function(){var t=[];return e.state.filteredPlaces.forEach(function(e,a){a%3===0?t.push([e]):t[t.length-1].push(e)}),t},e.state={loadedPlaces:[],filteredPlaces:[],filters:{priceFilter:-1,ratingFilter:-1}},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return window.filteredPlaces=this.state.filteredPlaces,o.a.createElement("div",null,o.a.createElement("h2",{style:{backgroundColor:"#E19B5F",width:"100%",height:"100%",textAlign:"center",fontSize:"70px",fontFamily:"Palatino Linotype",color:"red"}},"FOOD FINDER"),o.a.createElement(E,{mainLocation:this.props.mainLocation,filteredPlaces:this.state.filteredPlaces,loadedPlaces:this.state.loadedPlaces,setLoadedPlaces:this.setLoadedPlaces,setFilteredPlaces:this.setFilteredPlaces}),o.a.createElement(b,{filters:this.state.filters,setFilter:this.setFilter}),o.a.createElement("div",{className:"container",style:{marginTop:"20px"}},this.getGroupedPlaces().map(function(e,t){return o.a.createElement("div",{className:"row",key:"places".concat(t)},e.map(function(e,t){return o.a.createElement("div",{className:"col-md card",key:"place".concat(t),style:{margin:"5px",paddingTop:"5px"}},e.photos&&e.photos.length>0?o.a.createElement("img",{className:"card-img-top",src:e.photos[0].getUrl(),alt:e.name}):"",o.a.createElement("div",{className:"card-body"},o.a.createElement("h6",{className:"card-title"},e.name)))}))})))}}]),t}(o.a.Component),F=a(26),P=a.n(F),O=a(21),w=a.n(O),j=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).getGeoLocation=function(){navigator.geolocation.getCurrentPosition(function(e){var t=e.coords.latitude,n=e.coords.longitude;a.props.setMainLocation({lat:t,lng:n}),a.props.history.push("/home")},function(){a.props.setStatusMessage("Unable to retrieve your location"),a.props.history.push("/home")})},a.state={modalShow:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({show:!0})}},{key:"render",value:function(){var e=this;return window.navigator.geolocation?o.a.createElement(w.a,{show:this.state.show,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0},o.a.createElement(w.a.Header,{closeButton:!0},o.a.createElement(w.a.Title,{id:"contained-modal-title-vcenter"},"Ubicaci\xf3n")),o.a.createElement(w.a.Body,null,o.a.createElement("h4",null,"Acceso"),o.a.createElement("p",null,"Para brindarte una mejor experiencia, Food Finder necesita el acceso a tu ubicaci\xf3n. \xbfAutorizas la acci\xf3n?")),o.a.createElement(w.a.Footer,null,o.a.createElement(P.a,{variant:"danger",onClick:this.getGeoLocation},"Aceptar"),o.a.createElement(P.a,{variant:"secondary",onClick:function(){return e.props.history.push("/home")}},"Ignorar"))):(this.props.setStatusMessage("Geolocation is not supported by your browser."),o.a.createElement(d.a,{to:"/home"}))}}]),t}(o.a.Component),k=Object(d.e)(j),M=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).setMainLocation=function(t){e.setState({mainLocation:t})},e.setStatusMessage=function(t){e.setState({statusMessage:t})},e.state={mainLocation:{lat:20.650483,lng:-103.4054717},statusMessage:null},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"app"},this.state.statusMessage?o.a.createElement("div",{className:"alert alert-warning",role:"alert"},this.state.statusMessage,o.a.createElement("button",{type:"button",class:"close","data-dismiss":"alert","aria-label":"Close",onClick:function(){return e.setStatusMessage(null)}},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))):"",o.a.createElement(p.a,null,o.a.createElement(d.b,{path:"/",component:h,exact:!0}),o.a.createElement(d.b,{path:"/home",component:function(){return o.a.createElement(y,{mainLocation:e.state.mainLocation,setMainLocation:e.setMainLocation})}}),o.a.createElement(d.b,{path:"/location",component:function(){return o.a.createElement(k,{setMainLocation:e.setMainLocation,setStatusMessage:e.setStatusMessage})}})))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(123);i.a.render(o.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},56:function(e,t,a){e.exports=a(124)},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){}},[[56,1,2]]]);
//# sourceMappingURL=main.8c8f77cc.chunk.js.map